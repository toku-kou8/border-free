<%= render "teachers/shared/header" %>
<% week = ["日", "月", "火", "水", "木", "金", "土"] %>
<p id="notice"><%= notice %></p>

<div class="text-center mt-3">
  <h1 class="text-center undertitle">授業詳細</h1>
</div>
<div class="container">
  <div class="row">
    <div class="col-md-4 offset-md-1">
      <div class="schedule"><h3>基本情報</h3></div>
      <table class="table">
        <tr>
          <th>授業id</th>
          <td><%= @lesson.id %></td>
        </tr>
        <tr>
          <th>授業日</th>
          <td><%= @lesson.start_time.strftime("20%y/%m/%d %H:%M~") %></td>
        </tr>
        <tr>
          <th>生徒氏名</th>
          <td><%= @lesson.student.name %></td>
        </tr>
        <tr>
          <th>科目</th>
          <td><%= @lesson.subject.name %></td>
        </tr>
      </table>
    </div>
    <div class="col-md-5 offset-md-1">
      <div class="mb-3">
        <h5>講師コメント</h5>
        <div>
          <%= @lesson.teacher_comment %>
        </div>
      </div>
      <div class="mb-5">
        <h5>生徒コメント</h5>
        <div>
          <%= @lesson.student_comment %>
        </div>
      </div>
      <div class="mb-2">
        <h5>評価</h5>
        <div id="star-rate"></div>
      </div>
      <script>
        $('#star-rate').raty({
          size      : 36,
          starOff   : '<%= asset_path('star-off.png') %>',
          starOn    : '<%= asset_path('star-on.png') %>',
          half      : false,
          readOnly: true,
          score: <%= @lesson.star %>,
        });
      </script>
      <div class="mt-5">
        <%= form_with model: @lesson, url: teacher_class_path(@lesson), method: :patch do |f| %>
        <div class="form-tag">
          <%= f.label :teacher_comment, 'コメント更新', class: 'control-label ml-3 h5' %><br>
          <%= f.text_area :teacher_comment, size: "50x5" %>
        </div>
        <div class="submit m-3">
          <%= f.submit "更新", class: 'btn btn-success' %>
        </div>
        <% end %>
      </div>
    </div>

  </div>
</div>
